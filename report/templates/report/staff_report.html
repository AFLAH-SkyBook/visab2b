{% extends "dashboard.html" %}
{% load tailwind_filters %}

{% block title %}Reports{% endblock title %}

{% block content %}
	<div class="page-wrapper">
		<div class="page-content">
				<!-- Start Content -->
				
				<div class="row">
					<div class="col-lg-7 mx-auto">
						<div class="card border-top border-0 border-4 border-info">
							<div class="card-body p-4 p-lg-5">
								<form class="row g-3" method="GET" action=".">
									<div class="col-md-6">
										<div class="input-group">
											<span class="input-group-text bg-transparent"><i class='bx bxs-buildings' ></i></span>
											<select id="branch" class="form-control" name="branch">
												<option value="" selected>Select branch</option>
												{% for branch in branches %}
												<option value="{{ branch.name }}">{{ branch.name }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="col-md-6">
										<div class="input-group"> <span class="input-group-text bg-transparent"><i class='bx bxs-user' ></i></span>
											<input type="search" class="form-control" name="staff" placeholder="Enter Staff name..." />
										</div>
									</div>
									<div class="col-md-6">
										<div class="input-group"> <span class="input-group-text bg-transparent"><i class='bx bxs-plane-alt' ></i></span>
											<select id="country" class="form-control" name="country">
												<option value="" selected>Select Country</option>
												{% for country in countries %}
												<option value="{{ country.name }}">{{ country.name }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="col-md-6">
										<div class="input-group"> <span class="input-group-text bg-transparent"><i class='bx bx-paper-plane' ></i></span>
											<input type="search" class="form-control" name="type" placeholder="Enter visa type..." />
										</div>
									</div>
									<div class="col-12">
										<div class="input-group"> <span class="input-group-text bg-transparent"><i class='bx bx-calendar-exclamation' ></i></span>
											<select id="status" class="form-control" name="status">
												<option value="" selected>Select Visa status</option>
												<option value="Documents Uploaded">Documents Uploaded</option>
												<option value="Sent for visa processing">Sent for visa processing</option>
												<option value="Visa approved">Visa approved</option>
												<option value="Application rejected">Application rejected</option>
											</select>
										</div>
									</div>
									
									<div class="col-md-6">
										<label for="inputLastName1" class="form-label">From</label>
										<div class="input-group">
											<input type="date" class="form-control" name="date_from" placeholder="First Name" />
										</div>
									</div>
									<div class="col-md-6">
										<label for="inputLastName2" class="form-label">To</label>
										<div class="input-group">
											<input type="date" class="form-control" name="date_to" placeholder="Last Name" />
										</div>
									</div>
									<div class="col-12">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" id="csv_export" name="export" value="csv">
											<label class="form-check-label" for="csv_export">Export to CSV</label>
										</div>
									</div>
									<div class="col-12">
										<button type="submit" class="btn btn-primary px-5">Filter / Export</button>
									</div>
								</form>
							</div>
						</div>
					</div>

				</div>

				<div class="row">
					<div class="col-lg-3 col-6 mt-4">
						<div>
							<h4 class="mb-0 fs-sm-4 fs-6">Total Count: <span class="text-danger fw-bold">{{ total }}</span></h4>
						</div>
					</div>

					<div class="col-lg-3 col-6 mt-4">
						<div>
							<h4 class="mb-0 fs-sm-4 fs-6">Filtered Count: <span class="text-danger fw-bold">{{ count }}</span></h4>
						</div>
					</div>

				</div>

				<hr>

				<div class="table-responsive">
					<table class="table table-striped align-middle">

						<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Application ID</th>
							<th scope="col">Name</th>
							<th scope="col">Gender</th>
							<th scope="col">Age</th>
							<th scope="col">Visa country</th>
							<th scope="col">Visa type</th>
							<th scope="col">Status</th>
							<th scope="col">Done by</th>
							<th scope="col">Branch</th>
							<th scope="col">Date & Time</th>
						</tr>
						</thead>
				
						<tbody>
				
						{% for application in applications %}
							<tr>
							<th scope="row">{{ forloop.counter }}</th>
							<td>{{ application.application_id }}</td>
							<td>{{ application.name }}</td>
							<td>{{ application.gender }}</td>
							<td>{{ application.age }}</td>
							<td>{{ application.visa_country }}</td>
							<td>{{ application.type }}</td>
							<td>{{ application.status }}</td>
							<td>{{ application.upload_by }}</td>
							<td>{{ application.upload_branch }}</td>
							<td>{{ application.upload_date }}</td>
							</tr>
						{% endfor %}
				
						</tbody>
				
					</table>
				</div>


			<!-- END CONTENT -->
		</div>
	</div>
	
	<!--end page wrapper -->

      	<hr>
        
{% endblock content %}


